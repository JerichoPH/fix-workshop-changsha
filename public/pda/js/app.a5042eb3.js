(function(t){function e(e){for(var n,s,c=e[0],r=e[1],l=e[2],u=0,p=[];u<c.length;u++)s=c[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&p.push(i[s][0]),i[s]=0;for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,l||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,c=1;c<a.length;c++){var r=a[c];0!==i[r]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},i={app:0},o=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/pda/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},1:function(t,e){},10:function(t,e){},11:function(t,e){},12:function(t,e){},13:function(t,e){},14:function(t,e){},2:function(t,e){},"24d3":function(t,e,a){},3:function(t,e){},4:function(t,e){},5:function(t,e){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-layout",{attrs:{view:"lHh Lpr lFf"}},["登录"!=t.$route.name&&"注册"!=t.$route.name?a("NavBar"):t._e(),a("q-page-container",[a("Fab",{directives:[{name:"show",rawName:"v-show",value:"登录"!=t.$route.name&&"注册"!=t.$route.name&&t.$store.state.showFab,expression:"\n        $route.name != '登录' && $route.name != '注册' && $store.state.showFab\n      "}],staticStyle:{"z-index":"90"}}),a("router-view")],1)],1)},o=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page-sticky",{staticClass:"flex",attrs:{position:"bottom-right",offset:t.fabPos}},[a("div",{staticClass:"q-mt-md"},[a("q-fab",{directives:[{name:"touch-pan",rawName:"v-touch-pan.prevent.mouse",value:t.moveFab,expression:"moveFab",modifiers:{prevent:!0,mouse:!0}}],attrs:{label:"快速访问","vertical-actions-align":"left",color:"purple",icon:"keyboard_arrow_down",direction:"up",disable:t.draggingFab},model:{value:t.fab2,callback:function(e){t.fab2=e},expression:"fab2"}},[a("q-fab-action",{attrs:{color:"primary",icon:"mail",label:"接口测试"},on:{click:t.apitest}}),a("q-fab-action",{attrs:{color:"secondary",icon:"alarm",label:"入库"},on:{click:function(e){return t.$router.push("/store")}}}),a("q-fab-action",{attrs:{color:"orange",icon:"airplay",label:"测试"},on:{click:function(e){return t.$router.push("/about")}}}),a("q-fab-action",{attrs:{color:"accent",icon:"room",label:"盘点"},on:{click:function(e){return t.$router.push("/check")}}}),a("q-fab-action",{attrs:{color:"accent",icon:"room",label:"首页"},on:{click:function(e){return t.$router.push("/")}}})],1)],1)])},c=[],r={name:"Fab",data:function(){return{fabPos:[18,18],draggingFab:!1,fab2:!1}},methods:{onClick:function(){},moveFab:function(t){this.draggingFab=!0!==t.isFirst&&!0!==t.isFinal,this.fabPos=[this.fabPos[0]-t.delta.x,this.fabPos[1]-t.delta.y]},apitest:function(){console.log(this.$router.options.routes),this.$http.get("http://changsha.zhongchengkeshi.com/api/pdaBaseInfo").then((function(t){localStorage.setItem("basicinfo",JSON.stringify(t.data.data))})),navigator.onLine?this.$q.notify({message:"当前在线",type:"positive"}):this.$q.notify({message:"当前离线",type:"warning"})}}},l=r,d=a("2877"),u=a("de5e"),p=a("c294"),m=a("72db"),h=a("75c3"),f=a("93dc"),v=a.n(f),g=Object(d["a"])(l,s,c,!1,null,null,null),y=g.exports;v()(g,"components",{QPageSticky:u["a"],QFab:p["a"],QFabAction:m["a"]}),v()(g,"directives",{TouchPan:h["a"]});var b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("q-header",{attrs:{elevated:""}},[n("q-toolbar",[n("q-btn",{attrs:{flat:"",dense:"",round:"",to:"/","aria-label":"Menu",icon:"menu"}}),n("q-toolbar-title"),n("q-space"),n("q-input",{staticClass:"q-mr-md",attrs:{dark:"",dense:"",standout:"","input-class":"text-left"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.showDetail(e)}},scopedSlots:t._u([{key:"prepend",fn:function(){return[n("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"center_focus_weak"},on:{click:t.showQR}})]},proxy:!0},{key:"append",fn:function(){return[""===t.text?n("q-icon",{attrs:{name:"search"}}):n("q-icon",{staticClass:"cursor-pointer",attrs:{name:"clear"},on:{click:function(e){t.text=""}}})]},proxy:!0}]),model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),n("q-icon",{directives:[{name:"show",rawName:"v-show",value:t.onLine,expression:"onLine"}],attrs:{name:"signal_wifi_0_bar"}}),n("q-icon",{directives:[{name:"show",rawName:"v-show",value:!t.onLine,expression:"!onLine"}],staticClass:"text-orange",attrs:{name:"signal_wifi_off"}}),n("q-btn",{attrs:{flat:"",round:"",dense:""}},[n("q-icon",{attrs:{name:"more_vert"}}),n("q-menu",[n("div",{staticClass:"row no-wrap q-pa-md"},[n("div",{staticClass:"column"},[n("div",{staticClass:"text-h6 q-mb-md"},[t._v("应用设置")]),n("q-toggle",{attrs:{label:"启用浮动工具栏"},model:{value:t.$store.state.showFab,callback:function(e){t.$set(t.$store.state,"showFab",e)},expression:"$store.state.showFab"}}),n("q-toggle",{attrs:{label:"强制在线模式"},model:{value:t.$store.state.offlineMode,callback:function(e){t.$set(t.$store.state,"offlineMode",e)},expression:"$store.state.offlineMode"}}),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"更新应用",push:"",size:"sm"},on:{click:t.update}})],1),n("q-separator",{staticClass:"q-mx-lg",attrs:{vertical:"",inset:""}}),n("div",{staticClass:"column items-center"},[n("q-avatar",{attrs:{size:"72px"}},[n("img",{attrs:{src:a("d607")}})]),n("div",{staticClass:"text-subtitle1 q-mt-md q-mb-xs"},[t._v(t._s(t.username))]),n("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"退出登录",to:"/login",push:"",size:"sm"},on:{click:t.logout}})],1)],1)])],1)],1),n("q-toolbar",{attrs:{inset:""}},[n("q-btn",{directives:[{name:"show",rawName:"v-show",value:"首页"!==t.$route.name,expression:"$route.name !== '首页'"}],attrs:{size:"sm",padding:"xs",flat:"",icon:"arrow_back_ios_new"},on:{click:function(e){return t.$router.go(-1)}}}),n("q-toolbar-title",[n("strong",[t._v(t._s(t.$route.name))])])],1)],1)],1)},_=[],q=(a("99af"),a("14b7")),k=a.n(q),C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",attrs:{"full-height":"",persistent:""},on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-tabs",{staticClass:"bg-primary text-white relative",attrs:{dense:"","indicator-color":"purple",align:"justify"},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"detail",label:"设备详情"}}),a("q-tab",{attrs:{name:"history",label:"设备履历"}}),"INSTALLED"===t.instance["state_code"]?a("q-tab",{attrs:{name:"loc",label:"现场备品定位"}}):t._e()],1),a("q-tab-panels",{attrs:{animated:"",swipeable:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{staticStyle:{"overflow-y":"auto",height:"calc(100vh - 160px)"},attrs:{name:"detail"}},[a("div",{staticClass:"text-h6"},[t._v("设备详情")]),t._l(t.render,(function(e,n){return a("q-item",{key:n,staticClass:"ellipsis",attrs:{dense:""}},[t._v(" "+t._s(e[0])+":"),a("q-space"),t._v(" "+t._s("http://iot.api.in3km.com"!==t.instance[e[1]]?t.instance[e[1]]:"")+" ")],1)}))],2),a("q-tab-panel",{attrs:{name:"history"}},[a("div",{staticClass:"text-h6"},[t._v("设备履历")]),a("q-timeline",{staticStyle:{"overflow-y":"auto",height:"calc(100vh - 170px)"},attrs:{color:"primary"}},t._l(t.logs,(function(e){return a("q-timeline-entry",{key:e.date,attrs:{title:e.name,subtitle:e.created_at.split(" ")[0]}},[a("div",[t._v(t._s(e.description))])])})),1)],1),"INSTALLED"===t.instance["state_code"]?a("q-tab-panel",{attrs:{name:"loc"}},[a("div",{staticClass:"text-h6"},[t._v("现场备品定位")]),a("q-item",[t._v("所属车间车站:"+t._s(t.loc[0]["name"])+"，"+t._s(t.loc[1]["name"]))]),a("q-item",[t._v("备品数量:"+t._s(t.loc[0]["count"])+"，"+t._s(t.loc[1]["count"]))])],1):t._e()],1),"detail"===t.tab?a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"关闭"},on:{click:t.onCancelClick}})],1):t._e()],1)],1)},w=[],$={name:"detail",props:["ucode"],data:function(){return{url:null,instance:{},logs:[],loc:[],tab:"detail",render:[["物资编码","identity_code"],["所编号","serial_number"],["种类","category_name"],["类型","model_name"],["型号","sub_model_name"],["使用年限","service_life"],["到期时间","scarping_at"],["供应商","factory_name"],["出厂日期","made_at"],["仓库位置","location_name"],["安装位置","install_location_name"],["状态","status"],["车间","maintain_workshop_name"],["车站","maintain_station_name"]]}},computed:{unique_code:function(){return this.ucode}},methods:{toggle:function(){this.url=null===this.url?"".concat(window.location.protocol,"//").concat(window.location.host)+this.instance.location_image:null},show:function(){var t=this,e=this.unique_code;this.$http.get("entireInstanceByIdentityCode/".concat(e)).then((function(e){t.instance=e.data.data.entire_instance,t.logs=e.data.data.entire_instance.entire_instance_logs,t.$refs.dialog.show()})).catch((function(e){var a=e.response;t.$q.notify({message:a.data.msg,type:"warning",position:"top"})}))},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},onCancelClick:function(){this.hide()}}},x=$,O=a("24e8"),Q=a("f09f"),S=a("429b"),L=a("7460"),D=a("adad"),j=a("823b"),I=a("66e5"),E=a("2c91"),T=a("9c40"),z=a("068f"),N=a("05eb"),Y=a("74af"),A=a("4b7e"),P=Object(d["a"])(x,C,w,!1,null,"2dcd6317",null),B=P.exports;v()(P,"components",{QDialog:O["a"],QCard:Q["a"],QTabs:S["a"],QTab:L["a"],QTabPanels:D["a"],QTabPanel:j["a"],QItem:I["a"],QSpace:E["a"],QBtn:T["a"],QImg:z["a"],QTimeline:N["a"],QTimelineEntry:Y["a"],QCardActions:A["a"]});var M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",attrs:{maximized:""},on:{hide:t.onDialogHide,click:function(e){return t.hide()}}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("qrcode-stream",{on:{decode:t.onDecode}})],1)],1)},H=[],F={name:"detail",data:function(){return{expanded:!1,receipt:{},detail:{},items:{}}},methods:{onDecode:function(t){this.$emit("ok",t),this.$refs.dialog.hide()},show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok"),this.hide()},onCancelClick:function(){this.hide()}}},W=F,R=Object(d["a"])(W,M,H,!1,null,"037c345a",null),K=R.exports;v()(R,"components",{QDialog:O["a"],QCard:Q["a"]});var V={name:"NavBar",mounted:function(){window.addEventListener("online",this.updateOnlineStatus),window.addEventListener("offline",this.updateOnlineStatus);var t=new Image;t.src=a("d607")},created:function(){var t=localStorage.getItem("token"),e=k.a.decode(t);this.username=e.payload.nickname,this.$store.state.userInfo=e.payload},data:function(){return{onLine:navigator.onLine,username:"",text:""}},methods:{update:function(){var t=this;this.$q.dialog({title:"应用更新",message:"修改项目地址",prompt:{model:"".concat(window.location.protocol,"//").concat(window.location.host,"/pda"),type:"text"},ok:{label:"更新"},cancel:{label:"取消"},persistent:!0}).onOk((function(e){console.log(">>>> OK, received",e),t.$init(e),t.$update()}))},showQR:function(){var t=this;this.$q.dialog({component:K,parent:this}).onOk((function(e){t.text=e,t.showDetail(),console.log("OK")})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))},showDetail:function(){this.$q.dialog({component:B,parent:this,ucode:this.text}).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))},updateOnlineStatus:function(t){var e=t.type;this.onLine="online"===e},logout:function(){this.$q.notify({message:"退出登录成功",position:"top",type:"positive"}),localStorage.clear()}},beforeDestroy:function(){window.removeEventListener("online",this.updateOnlineStatus),window.removeEventListener("offline",this.updateOnlineStatus)}},U=V,J=a("e359"),G=a("65c6"),Z=a("6ac5"),X=a("27f9"),tt=a("0016"),et=a("4e73"),at=a("9564"),nt=a("eb85"),it=a("cb32"),ot=a("7f67"),st=Object(d["a"])(U,b,_,!1,null,"2cb494a4",null),ct=st.exports;v()(st,"components",{QHeader:J["a"],QToolbar:G["a"],QBtn:T["a"],QToolbarTitle:Z["a"],QSpace:E["a"],QInput:X["a"],QIcon:tt["a"],QMenu:et["a"],QToggle:at["a"],QSeparator:nt["a"],QAvatar:it["a"]}),v()(st,"directives",{ClosePopup:ot["a"]});var rt={name:"LayoutDefault",components:{Fab:y,NavBar:ct}},lt=rt,dt=a("4d5a"),ut=a("09e3"),pt=Object(d["a"])(lt,i,o,!1,null,null,null),mt=pt.exports;v()(pt,"components",{QLayout:dt["a"],QPageContainer:ut["a"]});var ht=a("8c4f"),ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"row q-col-gutter-xs"},t._l(t.navs,(function(e,n){return a("q-card",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!nav.hidden"}],key:n,class:e.class+" col-6",staticStyle:{"text-align":"center","vertical-align":"center"},on:{click:function(a){return t.navFn(e.path)}}},[a("q-card-section",{staticClass:"fix-center"},[a("q-icon",{staticStyle:{"font-size":"4rem"},attrs:{name:e.icon}}),a("div",{staticClass:"text-h6"},[t._v(t._s(e.name))])],1),a("q-card-section",{staticClass:"q-pt-none"})],1)})),1)])])},vt=[],gt=(a("4de4"),a("5319"),a("ac1f"),{data:function(){return{navs:[]}},created:function(){this.navs=this.$router.options.routes.filter((function(t){return"/login"!=t.path&&"/"!=t.path&&"/regsiter"!=t.path}))},methods:{navFn:function(t){0!==t.indexOf(":id")?this.$router.push(t.replace(":id","")):this.$router.push(t)}}}),yt=gt,bt=a("a370"),_t=Object(d["a"])(yt,ft,vt,!1,null,"36cd5122",null),qt=_t.exports;v()(_t,"components",{QCard:Q["a"],QCardSection:bt["a"],QIcon:tt["a"]});var kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v("测试安卓接口功能")]),a("h2",[t._v(t._s(t.date))]),a("div",{staticClass:"q-pa-md"},[a("q-table",{attrs:{title:"缓存",data:t.data,columns:t.columns,"row-key":"name"}})],1),a("div",{staticClass:"q-pa-md column items-center"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-复位Web端首页",push:"",size:"lg"},on:{click:t.testReset}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-清空Web端缓存",push:"",size:"lg"},on:{click:t.testClear}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-更新Web端缓存",push:"",size:"lg"},on:{click:t.testUpdate}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-参数-所有",push:"",size:"lg"},on:{click:t.testParameterAll}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-参数-清空",push:"",size:"lg"},on:{click:t.testParameterClear}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-参数-查询",push:"",size:"lg"},on:{click:t.testParameterQuery}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-参数-删除",push:"",size:"lg"},on:{click:t.testParameterDelete}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-参数-插入",push:"",size:"lg"},on:{click:t.testParameterInsert}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-参数-更新",push:"",size:"lg"},on:{click:t.testParameterUpdate}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-缓存-写入",push:"",size:"lg"},on:{click:t.testCachePut}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-缓存-读取",push:"",size:"lg"},on:{click:t.testCacheGet}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-缓存-数量",push:"",size:"lg"},on:{click:t.testCacheSize}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-缓存-去除",push:"",size:"lg"},on:{click:t.testCacheRemove}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-缓存-清空",push:"",size:"lg"},on:{click:t.testCacheClear}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-CAD-访问",push:"",size:"lg"},on:{click:t.testCADAccess}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{color:"primary",label:"测试-CAD-文件集",push:"",size:"lg"},on:{click:t.testCADFiles}})],1)])},Ct=[],wt=(a("1276"),{data:function(){return{columns:[{name:"key",label:"键",align:"left",field:function(t){return t.key},format:function(t){return"".concat(t)}},{name:"value",align:"right",label:"值",field:"value"}],data:[],date:""}},methods:{testReset:function(){this.$reset()},testClear:function(){this.$clear()},testUpdate:function(){this.$update()},testParameterAll:function(){var t=this.$pall();console.log(JSON.parse(t)),this.data=JSON.parse(t)},testParameterClear:function(){this.$pclear()},testParameterQuery:function(){var t=this;this.$q.dialog({title:"测试",message:"输入查询项",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(e){console.log(e),t.$q.notify({message:window.AndroidWebView.ParameterQuery(e),type:"positive",position:"top"})}))},testParameterDelete:function(){var t=this;this.$q.dialog({title:"测试",message:"输入删除项",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(e){t.$pdelete(e)}))},testParameterInsert:function(){var t=this;this.$q.dialog({title:"测试",message:"输入插入项(逗号分隔k,v)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(e){t.$pinsert(e.split(",")[0],e.split(",")[1])}))},testParameterUpdate:function(){var t=this;this.$q.dialog({title:"测试",message:"输入修改项(逗号分隔k,v)",prompt:{model:"",type:"text"},cancel:!0,persistent:!0}).onOk((function(e){t.$pupdate(e.split(",")[0],e.split(",")[1])}))},testCachePut:function(){var t=new Date,e=t.toLocaleTimeString(),a=window.AndroidWebView.CachePut("cache-"+e);document.getElementById("testLog").value=a},testCacheGet:function(){var t=window.AndroidWebView.CacheGet(!0);document.getElementById("testLog").value=t},testCacheSize:function(){var t=window.AndroidWebView.CacheSize();document.getElementById("testLog").value=t},testCacheRemove:function(){var t=window.AndroidWebView.CacheRemove(0);document.getElementById("testLog").value=t},testCacheClear:function(){var t=window.AndroidWebView.CacheClear();document.getElementById("testLog").value=t},testCADAccess:function(){var t=window.AndroidWebView.CADAccess("sample.dwg");document.getElementById("testLog").value=t},testCADFiles:function(){var t=window.AndroidWebView.CADFiles();document.getElementById("testLog").value=t}},created:function(){this.date=this.$date.formatDate(Date.now(),"YYYY-MM-DD  HH:mm:ss Z")}}),$t=wt,xt=a("eaac"),Ot=Object(d["a"])($t,kt,Ct,!1,null,"0fc6b4d0",null),Qt=Ot.exports;v()(Ot,"components",{QTable:xt["a"],QBtn:T["a"]}),v()(Ot,"directives",{ClosePopup:ot["a"]});var St=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",[n("q-page-container",[n("q-page",{staticClass:"flex bg-image flex-center"},[n("q-card",{style:t.$q.screen.lt.sm?{width:"80%"}:{width:"30%"}},[n("q-card-section",[n("q-avatar",{staticClass:"absolute-center shadow-10",attrs:{size:"103px"}},[n("img",{attrs:{src:a("d607")}})])],1),n("q-card-section",[n("div",{staticClass:"text-center q-pt-lg"},[n("div",{staticClass:"col text-h6 ellipsis"},[t._v("登录")])])]),n("q-card-section",[n("q-form",{staticClass:"q-gutter-md"},[n("q-input",{attrs:{autocapitalize:"off",filled:"",label:"账号",placeholder:"请输入账号","lazy-rules":""},model:{value:t.ld.username,callback:function(e){t.$set(t.ld,"username",e)},expression:"ld.username"}}),n("q-input",{attrs:{type:"password",filled:"",placeholder:"请输入密码",label:"密码","lazy-rules":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.ld.password,callback:function(e){t.$set(t.ld,"password",e)},expression:"ld.password"}}),n("div",[n("q-btn",{staticClass:"full-width",attrs:{label:"登录",type:"button",color:"primary"},on:{click:t.login}})],1),n("div",[n("q-btn",{staticClass:"full-width",staticStyle:{"margin-top":"-10px"},attrs:{label:"前往注册",flat:"",type:"button",color:"primary",to:"/regsiter"}})],1)],1)],1)],1)],1)],1)],1)},Lt=[],Dt=(a("7db0"),{data:function(){return{ld:{username:"",password:""}}},created:function(){console.log(this.$route.params),this.$route.params&&(this.ld.username=this.$route.params.account,this.ld.password=this.$route.params.password)},methods:{login:function(){var t=this;if(navigator.onLine)this.$q.loadingBar.start(),this.$http.post("login",{account:this.ld.username,password:this.ld.password}).then((function(e){console.log(e),t.$q.loadingBar.stop(),200==e.data.status?(t.$q.notify({message:"登录成功",type:"positive",position:"top"}),localStorage.setItem("token",e.data.data.jwt),t.$router.push("/")):t.$q.notify({message:e.data.message,type:"warning",position:"top"})})).catch((function(e){console.log(e),t.$q.notify({message:"登录请求失败",type:"warning",position:"top"})}));else{var e=localStorage.getItem("basicinfo");e=JSON.parse(e);var a=this.$bcrypt.compareSync(this.ld.password,e.accounts.find((function(e){return e.account==t.ld.username})).password);if(this.$q.notify({message:a?"离线Hash验证成功":"离线Hash验证错误",type:a?"positive":"warning",position:"top"}),a){var n=k.a.sign({aud:e.accounts.find((function(e){return e.account==t.ld.username})).nickname},"test");localStorage.setItem("token",n),this.$router.push("/")}}}}}),jt=Dt,It=(a("d6db"),a("9989")),Et=a("0378"),Tt=Object(d["a"])(jt,St,Lt,!1,null,null,null),zt=Tt.exports;v()(Tt,"components",{QLayout:dt["a"],QPageContainer:ut["a"],QPage:It["a"],QCard:Q["a"],QCardSection:bt["a"],QAvatar:it["a"],QForm:Et["a"],QInput:X["a"],QBtn:T["a"]});var Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-layout",[n("q-page-container",[n("q-page",{staticClass:"flex bg-image flex-center"},[n("q-card",{style:t.$q.screen.lt.sm?{width:"80%"}:{width:"30%"}},[n("q-card-section",[n("q-avatar",{staticClass:"absolute-center shadow-10",attrs:{size:"103px"}},[n("img",{attrs:{src:a("d607")}})])],1),n("q-card-section",[n("div",{staticClass:"text-center q-pt-lg"},[n("div",{staticClass:"col text-h6 ellipsis"},[t._v("注册")])])]),n("q-card-section",[n("q-form",{staticClass:"q-gutter-md"},[n("q-input",{attrs:{autocapitalize:"off",filled:"",label:"账号",placeholder:"请输入账号","lazy-rules":""},model:{value:t.ld.account,callback:function(e){t.$set(t.ld,"account",e)},expression:"ld.account"}}),n("q-input",{attrs:{autocapitalize:"off",filled:"",label:"名称",placeholder:"请输入名称","lazy-rules":""},model:{value:t.ld.nickname,callback:function(e){t.$set(t.ld,"nickname",e)},expression:"ld.nickname"}}),n("q-input",{attrs:{type:"password",filled:"",placeholder:"请输入密码",label:"密码","lazy-rules":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.regsiter(e)}},model:{value:t.ld.password,callback:function(e){t.$set(t.ld,"password",e)},expression:"ld.password"}}),n("div",[n("q-btn",{staticClass:"full-width",attrs:{label:"注册",type:"button",color:"primary"},on:{click:t.regsiter}})],1),n("div",[n("q-btn",{staticClass:"full-width",staticStyle:{"margin-top":"-10px"},attrs:{label:"已经注册，前往登录",flat:"",type:"button",size:"sm",color:"primary",to:"/login"}})],1)],1)],1)],1)],1)],1)],1)},Yt=[],At=a("5530"),Pt={data:function(){return{ld:{account:"",password:"",nickname:""}}},methods:{regsiter:function(){var t=this;this.$http.post("register",Object(At["a"])({},this.ld)).then((function(e){t.$q.notify({message:e.data.msg,type:"positive",position:"top"}),t.$router.push({name:"登录",params:Object(At["a"])({},t.ld)})})).catch((function(e){var a=e.response;console.log(a),t.$q.notify({message:a.data.msg,type:"warning",position:"top"})})),console.log("注册成功")}}},Bt=Pt,Mt=(a("8a48"),Object(d["a"])(Bt,Nt,Yt,!1,null,null,null)),Ht=Mt.exports;v()(Mt,"components",{QLayout:dt["a"],QPageContainer:ut["a"],QPage:It["a"],QCard:Q["a"],QCardSection:bt["a"],QAvatar:it["a"],QForm:Et["a"],QInput:X["a"],QBtn:T["a"]});var Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("div",{staticClass:"q-gutter-sm row"},[a("q-radio",{staticClass:"col",attrs:{dense:"",val:"model",label:"按种类型搜索"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}}),a("q-radio",{staticClass:"col",attrs:{dense:"",val:"loc",label:"按位置搜索"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"search",label:"搜索"},on:{click:t.search}})],1),"loc"===t.mode?a("div",[a("q-expansion-item",{attrs:{label:"按位置搜索"}},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"位置编码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.search_loc,callback:function(e){t.search_loc=e},expression:"search_loc"}}),a("Location",{on:{locChange:t.handleLoc}})],1)],1):t._e(),"model"===t.mode?a("div",[a("q-expansion-item",{attrs:{label:"按种类型搜索"}},[a("model",{on:{modelChange:t.handleModel}})],1)],1):t._e()]),a("div",{ref:"scrollTargetRef",staticClass:"q-pa-md"},[a("q-infinite-scroll",{attrs:{offset:300,"scroll-target":"$refs.scrollTargetRef",disable:t.state},on:{load:t.appendSearch},scopedSlots:t._u([{key:"loading",fn:function(){return[a("div",{staticClass:"row justify-center q-my-md"},[a("q-spinner-dots",{attrs:{color:"primary",size:"40px"}})],1)]},proxy:!0}])},[a("SimpleList",{attrs:{Litems:t.items,showDelete:!1,slidable:!1}})],1)],1)])])},Wt=[],Rt=a("2909"),Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.items,(function(e,n){return a("q-slide-item",{key:n,on:{left:function(e){return t.onLeft(e,n)},right:function(e){return t.onRight(e,n)}},scopedSlots:t._u([t.slide?{key:"left",fn:function(){return[a("q-icon",{attrs:{name:"done"}})]},proxy:!0}:null,t.slide?{key:"right",fn:function(){return[a("q-icon",{attrs:{name:"alarm"}})]},proxy:!0}:null],null,!0)},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:"",active:e.active,"active-class":"bg-teal-1 text-grey-8"},on:{click:function(a){return t.showDetail(e.identity_code)}}},[a("q-item-section",[t._v(" "+t._s(e.identity_code)+t._s(e.unique_code)+" "),a("q-item-label",[t._v(t._s(e.category_name)+" "+t._s(e.model_name)+" "+t._s(e.sub_model_name))])],1),e.location_name?a("q-item-section",[t._v(" "+t._s(e.location_name)+" ")]):t._e(),e.source?a("q-item-section",[t._v(" "+t._s(e.source)+" ")]):t._e(),e.check?a("q-item-section",[t._v(" "+t._s(e.check)+" ")]):t._e(),""==!e.status?a("q-item-section",{staticClass:"text-black",staticStyle:{width:"55px","padding-right":"10px"},attrs:{thumbnail:""}},[t._v(" "+t._s(e.status)+" ")]):t._e(),t.AshowDelete?a("q-btn",{attrs:{size:"12px",flat:"",dense:"",round:"",icon:"delete",side:""},on:{click:function(e){return e.stopPropagation(),t.removeItem(n)}}}):t._e()],1)],1)})),1)],1)},Vt=[],Ut=(a("a434"),{name:"simpleList",props:{Litems:{default:[]},showDelete:{default:!0},slidable:{default:!0}},computed:{items:function(){return this.Litems},AshowDelete:function(){return this.showDelete},slide:function(){return this.slidable}},methods:{onLeft:function(t,e){var a=t.reset;this.finalize(a),this.Litems[e].active=!0},onRight:function(t,e){var a=t.reset;this.finalize(a),this.Litems[e].active=!1},finalize:function(t){this.timer=setTimeout((function(){t()}),200)},removeItem:function(t){var e=this;this.$q.dialog({title:"确认删除？",message:"删除设备： ".concat(this.items[t].identity_code),ok:{color:"negative"},cancel:!0,persistent:!0}).onOk((function(){e.items.splice(t,1)})).onCancel((function(){})).onDismiss((function(){}))},showDetail:function(t){this.$q.dialog({component:B,parent:this,ucode:t}).onOk((function(){})).onCancel((function(){})).onDismiss((function(){}))}},beforeDestroy:function(){clearTimeout(this.timer)}}),Jt=Ut,Gt=a("1c1c"),Zt=a("de1d"),Xt=a("4074"),te=a("0170"),ee=a("714f"),ae=Object(d["a"])(Jt,Kt,Vt,!1,null,"0180d12c",null),ne=ae.exports;v()(ae,"components",{QList:Gt["a"],QSlideItem:Zt["a"],QIcon:tt["a"],QItem:I["a"],QItemSection:Xt["a"],QItemLabel:te["a"],QBtn:T["a"]}),v()(ae,"directives",{Ripple:ee["a"]});var ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-tree",{attrs:{nodes:t.locations,"node-key":"unique_code","label-key":"name",selected:t.selected,"children-key":"subset"},on:{"update:selected":[t.selectaaa,function(e){t.selected=e}]}}),t._v(" "+t._s(t.selected)+" ")],1)},oe=[],se={name:"location",data:function(){return{selected:"",locations:[]}},mounted:function(){this.loadLocations()},methods:{selectaaa:function(t){console.log(t),this.$emit("locChange",t)},loadLocations:function(){var t=this,e=this.$q.notify({type:"ongoing",message:"正在获取位置数据...",position:"top"});this.$http.get("locations").then((function(a){t.locations=a.data.data,e({message:"获取位置信息成功",position:"top",type:"positive"})})).catch((function(t){var a=t.response;e({message:a.data.msg,position:"top",type:"warning"})}))}}},ce=se,re=a("7f41"),le=Object(d["a"])(ce,ie,oe,!1,null,"1d4d0a35",null),de=le.exports;v()(le,"components",{QTree:re["a"]});var ue=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-tree",{attrs:{nodes:t.models,"node-key":"unique_code","label-key":"name",selected:t.selected,"children-key":"subset"},on:{"update:selected":[t.selectaaa,function(e){t.selected=e}]}})],1)},pe=[],me={name:"model",data:function(){return{selected:"",models:[]}},mounted:function(){this.loadModels()},methods:{selectaaa:function(t){var e=t;console.log(t.length),3!==t.length?5!==t.length?this.$emit("modelChange",{category_unique_code:"",entire_model_unique_code:"",model_unique_code:e}):this.$emit("modelChange",{category_unique_code:"",entire_model_unique_code:e,model_unique_code:""}):this.$emit("modelChange",{category_unique_code:e,entire_model_unique_code:"",model_unique_code:""})},loadModels:function(){var t=this,e=this.$q.notify({type:"ongoing",message:"正在获取种类型数据...",position:"top"});this.$http.get("types").then((function(a){var n=a.data.data;t.models=n,e({message:"获取种类型信息成功",position:"top",type:"positive"})})).catch((function(t){var a=t.response;e({message:a.data.msg,position:"top",type:"warning"})}))}}},he=me,fe=Object(d["a"])(he,ue,pe,!1,null,"74eb29d6",null),ve=fe.exports;v()(fe,"components",{QTree:re["a"]});var ge={components:{SimpleList:ne,Location:de,Model:ve},data:function(){return{mode:"model",searchData:"",items:[],page:1,state:!1,search_category_unique_code:"",search_entire_model_unique_code:"",search_model_unique_code:"",search_loc:""}},watch:{mode:function(){this.search_category_unique_code="",this.search_entire_model_unique_code="",this.search_model_unique_code="",this.search_loc="",this.state=!1,this.page=1,this.items=[],this.appendSearch()}},methods:{search:function(){var t=this;this.page=1,this.$http.get("entireInstances",{params:{category_unique_code:this.search_category_unique_code?this.search_category_unique_code:null,entire_model_unique_code:this.search_entire_model_unique_code?this.search_entire_model_unique_code:null,model_unique_code:this.search_model_unique_code?this.search_model_unique_code:null,"location_unique_code[operator]":this.search_loc?"like":null,"location_unique_code[value]":this.search_loc?this.search_loc+"%":null,page:1}}).then((function(e){t.items=e.data.data.data,t.page+=1})).catch((function(t){var e=t.response;console.log(e)}))},handleLoc:function(t){this.search_loc=t},handleModel:function(t){this.search_category_unique_code=t.category_unique_code,this.search_entire_model_unique_code=t.entire_model_unique_code,this.search_model_unique_code=t.model_unique_code},appendSearch:function(t,e){var a=this;this.$http.get("entireInstances",{params:{category_unique_code:this.search_category_unique_code?this.search_category_unique_code:null,entire_model_unique_code:this.search_entire_model_unique_code?this.search_entire_model_unique_code:null,model_unique_code:this.search_model_unique_code?this.search_model_unique_code:null,"location_unique_code[operator]":this.search_loc?"like":null,"location_unique_code[value]":this.search_loc?this.search_loc+"%":null,page:this.page}}).then((function(t){var n;(console.log(t),0!==t.data.data.data.length)?(a.page+=1,(n=a.items).push.apply(n,Object(Rt["a"])(t.data.data.data)),e()):(a.state=!0,e())})).catch((function(t){var e=t.response;console.log(e)}))}}},ye=ge,be=a("3786"),_e=a("3b73"),qe=a("ef35"),ke=a("8380"),Ce=Object(d["a"])(ye,Ft,Wt,!1,null,"31739620",null),we=Ce.exports;v()(Ce,"components",{QRadio:be["a"],QInput:X["a"],QBtn:T["a"],QExpansionItem:_e["a"],QInfiniteScroll:qe["a"],QSpinnerDots:ke["a"]});var $e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"位置码"},model:{value:t.positionCode,callback:function(e){t.positionCode=e},expression:"positionCode"}}),a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 330px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"入库"},on:{click:t.makeStore}})],1)],1)])},xe=[],Oe=(a("d81d"),{components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:"",positionCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.unique_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("warehouseInOfSearch",{identity_code:this.deviceCode,location_unique_code:this.positionCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{active:!1,location_unique_code:t.positionCode}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeStore:function(){var t=this;if(""!=this.items&&this.items!=[]){var e={datas:this.items,date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("warehouseIn",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg})})),this.items=[]}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}}),Qe=Oe,Se=a("4983"),Le=Object(d["a"])(Qe,$e,xe,!1,null,"0ca5103a",null),De=Le.exports;v()(Le,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}}),a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"位置码"},model:{value:t.positionCode,callback:function(e){t.positionCode=e},expression:"positionCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 335px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"现场备品入库"},on:{click:t.makeStore}})],1)],1)])},Ie=[],Ee={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:"",positionCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.unique_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("sceneWarehouseInOfSearch",{code:this.deviceCode,location_unique_code:""}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data[0]),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeStore:function(){var t=this;if(0!==this.items.length){var e={datas:this.items.map((function(t){return{identity_code:t.identity_code,location_unique_code:""}})),date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("sceneWarehouseIn",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Te=Ee,ze=Object(d["a"])(Te,je,Ie,!1,null,"6ff2dc36",null),Ne=ze.exports;v()(ze,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"报废"},on:{click:t.makeScrap}})],1)],1)])},Ae=[],Pe={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.unique_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("scrapOfSearch",{data:this.deviceCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeScrap:function(){var t=this;if(0!==this.items.length){var e={datas:this.items.map((function(t){return t.unique_code})),date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("scrap",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=t.items.filter((function(t){return!t.active})),t.items=[]})).catch((function(e){var a=e.response;console.log(a),t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Be=Pe,Me=Object(d["a"])(Be,Ye,Ae,!1,null,"73867bc6",null),He=Me.exports;v()(Me,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"报损"},on:{click:t.makeDamage}})],1)],1)])},We=[],Re={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.unique_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("frmLossOfSearch",{data:this.deviceCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeDamage:function(){var t=this;if(0!==this.items.length){var e={datas:this.items.map((function(t){return t.unique_code})),date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("frmLoss",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Ke=Re,Ve=Object(d["a"])(Ke,Fe,We,!1,null,"0caaedea",null),Ue=Ve.exports;v()(Ve,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var Je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",disable:t.state,dense:t.state,autocapitalize:"off",label:"盘点位置"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getCheckList(e)}},scopedSlots:t._u([t.state?null:{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.getCheckList}})]},proxy:!0}],null,!0),model:{value:t.positionCode,callback:function(e){t.positionCode=e},expression:"positionCode"}}),t.state?a("q-input",{attrs:{outlined:"",dense:"",autocapitalize:"off",label:"盘点设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.preCheck(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.preCheck}})]},proxy:!0}],null,!1,648101733),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}}):t._e()],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 290px)"}},[a("q-card-section",[0!==t.items.length?a("simpleList",{staticStyle:{height:"calc(100vh - 310px)","overflow-y":"auto"},attrs:{Litems:t.items,showDelete:!t.state,slidable:!1}}):t._e()],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"盘点"},on:{click:t.makeCheck}})],1)],1)])},Ge=[],Ze={components:{simpleList:ne},data:function(){return{state:!1,items:[],active:!0,deviceCode:"",positionCode:""}},methods:{getCheckList:function(){var t=this;this.$http.post("takeStock/ready",{location_unique_code:this.positionCode}).then((function(e){var a=e.data.data;a.map((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e),{},{active:!1}))})),t.state=!0})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))},preCheck:function(){var t=this,e=this.items.find((function(e){return e.identity_code===t.deviceCode}));e?(this.$q.notify({type:"positive",position:"top",message:"盘点正常"}),e.active=!0,e.check="盘点正常",console.log(this.items)):(this.$q.notify({type:"warning",position:"top",message:"盘盈"}),this.$http.post("takeStock/scanCode",{location_unique_code:this.positionCode,identity_code:this.deviceCode}).then((function(e){console.log(e),t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{check:"盘盈",active:!0}))})))},makeCheck:function(){var t=this;if(""!=this.items&&this.items!=[]){var e={location_unique_code:this.positionCode,identity_code:this.items.filter((function(t){return t.active})).map((function(t){return t.identity_code})),date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("takeStock",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;console.log(a),t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Xe=Ze,ta=Object(d["a"])(Xe,Je,Ge,!1,null,"58e86ec2",null),ea=ta.exports;v()(ta,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QCardSection:bt["a"]});var aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,showDelete:t.showD,slidable:!1}})],1)],1),t.showD?a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"出所"},on:{click:t.makeDepotOut}})],1):a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"出所"},on:{click:t.makeTaskDepotOut}})],1)],1)])},na=[],ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("补充联系人信息")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"85%"}},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",disable:"",label:"经办人"},model:{value:t.$store.state.userInfo.nickname,callback:function(e){t.$set(t.$store.state.userInfo,"nickname",e)},expression:"$store.state.userInfo.nickname"}}),a("q-input",{attrs:{outlined:"",label:"联系人姓名"},model:{value:t.contact.contact_name,callback:function(e){t.$set(t.contact,"contact_name",e)},expression:"contact.contact_name"}}),a("q-input",{attrs:{outlined:"",label:"联系人电话"},model:{value:t.contact.contact_phone,callback:function(e){t.$set(t.contact,"contact_phone",e)},expression:"contact.contact_phone"}})],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"确认"},on:{click:t.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"取消"},on:{click:t.onCancelClick}})],1)],1)],1)},oa=[],sa={name:"contact",data:function(){return{contact:{contact_name:"",contact_phone:""}}},methods:{show:function(){this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",Object(At["a"])({},this.contact)),this.hide()},onCancelClick:function(){this.hide()}}},ca=sa,ra=Object(d["a"])(ca,ia,oa,!1,null,"79003aa7",null),la=ra.exports;v()(ra,"components",{QDialog:O["a"],QCard:Q["a"],QCardSection:bt["a"],QSpace:E["a"],QBtn:T["a"],QSeparator:nt["a"],QInput:X["a"],QCardActions:A["a"]}),v()(ra,"directives",{ClosePopup:ot["a"]});var da={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:"",showD:!0}},created:function(){var t=this;this.$route.params.id&&(this.showD=!1,this.$http.post("workshopStayOutEntireInstances",{serial_number:this.$route.params.id}).then((function(e){var a=e.data.data;a.map((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.entire_instance),{},{active:!1}))}))})))},methods:{addToList:function(){var t=this;if(!1===this.showD){var e=this.items.find((function(e){return e.identity_code===t.deviceCode}));return console.log(e),void(e?(this.$q.notify({type:"positive",position:"top",message:"扫码成功"}),e.active=!0,this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"不存在此设备"}))}if(""!=this.deviceCode){var a=this.items.map((function(t){return t.unique_code}));-1===a.indexOf(this.deviceCode)?(this.$http.post("workshopOutOfSearch",{data:this.deviceCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeDepotOut:function(){var t=this;""!=this.items&&this.items!=[]?this.$q.dialog({component:la,parent:this}).onOk((function(e){console.log(">>>> OK, received",e);var a=Object(At["a"])(Object(At["a"])({datas:t.items.map((function(t){return t.unique_code}))},e),{},{date:t.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")});console.log(a),t.$http.post("workshopOut",a).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))})):this.$q.notify({type:"warning",position:"top",message:"无设备"})},makeTaskDepotOut:function(){var t=this;""!=this.items&&this.items!=[]?this.$q.dialog({component:la,parent:this}).onOk((function(e){console.log(">>>> OK, received",e);var a=Object(At["a"])(Object(At["a"])({serial_number:t.$route.params.id,identity_codes:t.items.filter((function(t){return t.active})).map((function(t){return t.identity_code}))},e),{},{date:t.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")});console.log(a),t.$http.post("passWorkshopOut",a).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=t.items.filter((function(t){return!t.active}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))})):this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},ua=da,pa=Object(d["a"])(ua,aa,na,!1,null,"675fcaf4",null),ma=pa.exports;v()(pa,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var ha=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"入所"},on:{click:t.makeDepotIn}})],1)],1)])},fa=[],va={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.unique_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("workshopInOfSearch",{data:this.deviceCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeDepotIn:function(){var t=this;""!=this.items&&this.items!=[]?this.$q.dialog({component:la,parent:this}).onOk((function(e){console.log(">>>> OK, received",e);var a=Object(At["a"])(Object(At["a"])({datas:t.items.map((function(t){return t.unique_code}))},e),{},{date:t.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")});console.log(a),t.$http.post("workshopIn",a).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))})):this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},ga=va,ya=Object(d["a"])(ga,ha,fa,!1,null,"3cc355e1",null),ba=ya.exports;v()(ya,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var _a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{dense:"",disable:"direct"===t.mode,outlined:"",autocapitalize:"off",label:"已上道设备编号"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getOld(e)}},model:{value:t.install.old_identity_code,callback:function(e){t.$set(t.install,"old_identity_code",e)},expression:"install.old_identity_code"}}),a("q-input",{attrs:{dense:"",outlined:"",autocapitalize:"off",label:"待上道设备编号"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getNew(e)}},model:{value:t.install.new_identity_code,callback:function(e){t.$set(t.install,"new_identity_code",e)},expression:"install.new_identity_code"}}),"direct"!==t.mode?a("div",{staticClass:"q-gutter-sm row"},[a("q-radio",{staticClass:"col",attrs:{dense:"",val:"cycle",label:"周期修上道"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}}),a("q-radio",{staticClass:"col",attrs:{dense:"",val:"emergency",label:"应急上道"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}}),a("q-radio",{staticClass:"col",attrs:{dense:"",val:"fault",label:"故障修上道"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}}),a("q-radio",{staticClass:"col",attrs:{dense:"",val:"direct",label:"直接上道"},model:{value:t.mode,callback:function(e){t.mode=e},expression:"mode"}})],1):t._e(),"direct"==t.mode?a("q-input",{attrs:{dense:"",outlined:"",autocapitalize:"off",label:"直接上道位置"},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{color:"primary",label:"切换模式"},on:{click:function(e){t.mode="cycle",t.install.maintain_location_code=""}}})]},proxy:!0}],null,!1,811218809),model:{value:t.install.maintain_location_code,callback:function(e){t.$set(t.install,"maintain_location_code",e)},expression:"install.maintain_location_code"}}):t._e(),a("device",{attrs:{type:"old",item:t.olddevice}}),a("device",{attrs:{type:"new",item:t.newdevice}}),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"上道"},on:{click:t.makeInstall}})],1)],1)])},qa=[],ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-card",{attrs:{flat:"",bordered:""}},["old"==t.type?a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("已上道设备")])]):t._e(),"new"==t.type?a("q-card-section",[a("div",{staticClass:"text-h6"},[t._v("待上道设备")])]):t._e(),a("q-card-section",{staticClass:"q-pt-none"},[t._v(" 设备唯一编码："+t._s(t.item.identity_code)+" ")]),a("q-card-section",{staticClass:"q-pt-none"},[t._v(" 种类："+t._s(t.item.category_name)+" ")]),a("q-card-section",{staticClass:"q-pt-none"},[t._v(" 类型："+t._s(t.item.model_name)+" ")]),a("q-card-section",{staticClass:"q-pt-none"},[t._v(" 设备状态："+t._s(t.item.status)+" ")]),a("q-card-section",{staticClass:"q-pt-none"},[t._v(" 设备位置："+t._s(t.item.maintain_station_name)+" "+t._s(t.item.maintain_location_code)+" ")])],1)],1)},Ca=[],wa={name:"device",props:["type","item"],data:function(){return{ttype:this.type,iitem:this.item}}},$a=wa,xa=Object(d["a"])($a,ka,Ca,!1,null,null,null),Oa=xa.exports;v()(xa,"components",{QCard:Q["a"],QCardSection:bt["a"]});var Qa={components:{Device:Oa},data:function(){return{shape:"line",mode:"cycle",modes:["cycle","emergency","fault"],install:{new_identity_code:"",old_identity_code:"",maintain_location_code:""},olddevice:{},newdevice:{}}},methods:{makeInstall:function(){var t=this,e=Object(At["a"])({type:this.mode,date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")},this.install);this.$http.post("install",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg})})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))},getOld:function(){var t=this;this.$http.post("installOfSearch",{code:this.install.old_identity_code}).then((function(e){t.olddevice=e.data.data[0]}))},getNew:function(){var t=this;this.$http.post("installOfSearch",{code:this.install.new_identity_code}).then((function(e){t.newdevice=e.data.data[0]}))}}},Sa=Qa,La=Object(d["a"])(Sa,_a,qa,!1,null,"4bbf7e0c",null),Da=La.exports;v()(La,"components",{QInput:X["a"],QRadio:be["a"],QBtn:T["a"]});var ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"下道"},on:{click:t.makeUninstall}})],1)],1)])},Ia=[],Ea={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.unique_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("uninstallOfSearch",{code:this.deviceCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data[0]),{},{active:!1})),console.log(t.items)})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeUninstall:function(){var t=this;if(0!==this.items.length){var e={datas:this.items.map((function(t){return t.identity_code})),date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("uninstall",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Ta=Ea,za=Object(d["a"])(Ta,ja,Ia,!1,null,"79a9db84",null),Na=za.exports;v()(za,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QScrollArea:Se["a"],QCardSection:bt["a"]});var Ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",label:"设备唯一码"},model:{value:t.entire_instance_identity_code,callback:function(e){t.entire_instance_identity_code=e},expression:"entire_instance_identity_code"}}),a("q-input",{attrs:{outlined:"",label:"位置码"},model:{value:t.maintain_location_code,callback:function(e){t.maintain_location_code=e},expression:"maintain_location_code"}}),a("q-input",{attrs:{outlined:"",label:"车间/车站"},model:{value:t.station,callback:function(e){t.station=e},expression:"station"}})],1)])])},Aa=[],Pa={data:function(){return{entire_instance_identity_code:"",maintain_location_code:"",station:""}}},Ba=Pa,Ma=Object(d["a"])(Ba,Ya,Aa,!1,null,"6442424f",null),Ha=Ma.exports;v()(Ma,"components",{QInput:X["a"]});var Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("print",{attrs:{items:t.ll}}),a("q-input",{attrs:{label:"搜索"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.test(e)}},model:{value:t.searchData,callback:function(e){t.searchData=e},expression:"searchData"}}),a("q-input",{attrs:{label:"搜索列表"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.test2(e)}},model:{value:t.searchList,callback:function(e){t.searchList=e},expression:"searchList"}}),a("q-btn",{attrs:{label:"test"},on:{click:t.test}}),a("station"),a("model"),a("location")],1)},Wa=[],Ra=(a("a15b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("q-list",{attrs:{bordered:"",separator:""}},t._l(t.printlist,(function(e,n){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:n,attrs:{clickable:""},on:{click:function(a){return t.showDetail(e.identity_code)}}},[a("q-item-section",[t._v(" "+t._s(e.identity_code)+" "+t._s(e.category_name)+" "+t._s(e.model_name)+" "+t._s(e.made_at.split(" ")[0])+" ")])],1)})),1)],1)}),Ka=[],Va={name:"print",props:["items"],computed:{printlist:function(){return this.items}},data:function(){return{}},methods:{showDetail:function(t){this.$q.dialog({component:B,parent:this,ucode:t}).onOk((function(){console.log("OK")})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))}}},Ua=Va,Ja=Object(d["a"])(Ua,Ra,Ka,!1,null,"0432b082",null),Ga=Ja.exports;v()(Ja,"components",{QList:Gt["a"],QItem:I["a"],QItemSection:Xt["a"]}),v()(Ja,"directives",{Ripple:ee["a"]});var Za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md q-gutter-sm"},[a("q-tree",{attrs:{nodes:t.stations,"node-key":"unique_code","label-key":"name","children-key":"subset",selected:t.selected,"default-expand-all":""},on:{"update:selected":[t.selectaaa,function(e){t.selected=e}]}})],1)},Xa=[],tn={name:"station",data:function(){return{stations:[],selected:""}},mounted:function(){this.loadStations()},methods:{selectaaa:function(t){console.log(t)},loadStations:function(){var t=this,e=this.$q.notify({type:"ongoing",message:"正在获取车站数据...",position:"top"});this.$http.get("maintains").then((function(a){t.stations=a.data.data,e({message:"获取车站信息成功",position:"top",type:"positive"})})).catch((function(t){var a=t.response;e({message:a.data.msg,position:"top",type:"warning"})}))}}},en=tn,an=Object(d["a"])(en,Za,Xa,!1,null,"512dace6",null),nn=an.exports;v()(an,"components",{QTree:re["a"]});var on={components:{Station:nn,Model:ve,Location:de,print:Ga},data:function(){return{searchData:"Q010101B04900000001",searchList:"maintain_station_name,田心东站（城）",ll:[]}},methods:{test2:function(){var t=this,e=this.searchList.split(",").join("=");this.$http.get("entireInstances?".concat(e)).then((function(e){t.ll=e.data.data.entire_instances}))},test:function(){var t=this.searchData;this.$q.dialog({component:B,parent:this,ucode:t}).onOk((function(){console.log("OK")})).onCancel((function(){console.log("Cancel")})).onDismiss((function(){console.log("Called on OK or Cancel")}))}}},sn=on,cn=Object(d["a"])(sn,Fa,Wa,!1,null,"262d6826",null),rn=cn.exports;v()(cn,"components",{QInput:X["a"],QBtn:T["a"]});var ln=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",[a("q-card",{staticStyle:{height:"calc(100vh - 130px)","overflow-y":"auto"}},[a("q-card-section",[a("q-list",{directives:[{name:"show",rawName:"v-show",value:0==!t.tasks.length,expression:"!tasks.length == 0"}],attrs:{bordered:"",separator:""}},t._l(t.tasks,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{clickable:""},on:{click:function(a){return t.navTask(e.serial_number)}}},[a("q-item-section",[t._v(t._s(e.serial_number)+" "),a("q-item-label",[t._v(t._s(e.scene_workshop.name)+" "+t._s(e.maintain_station.name)+" "+t._s(e.work_area_by_unique_code.name)+" ")]),a("q-item-label")],1),a("q-item-section",{attrs:{avatar:""}},[t._v(t._s(e.status.name))])],1)})),1)],1)],1)],1)])])},dn=[],un={components:{},data:function(){return{tasks:[],deviceCode:""}},created:function(){var t=this;this.$http.post("taskList",{type:"NEW_STATION"}).then((function(e){t.tasks=e.data.data.data}))},methods:{navTask:function(t){console.log(t),this.$router.push({path:"/task/list/".concat(t)})}}},pn=un,mn=Object(d["a"])(pn,ln,dn,!1,null,"d4254068",null),hn=mn.exports;v()(mn,"components",{QCard:Q["a"],QCardSection:bt["a"],QList:Gt["a"],QItem:I["a"],QItemSection:Xt["a"],QItemLabel:te["a"]}),v()(mn,"directives",{Ripple:ee["a"]});var fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-pa-md"},[a("q-btn-group",{staticStyle:{height:"3.6rem"},attrs:{push:"",spread:""}},[a("q-btn",{attrs:{push:"",label:"分配检修",icon:"timeline"},on:{click:function(e){return t.$router.push({path:"/task/arrange/"+t.$route.params.id,query:{work_area_unique_code:t.data[0].workAreaUniqueCode}})}}}),a("q-btn",{attrs:{push:"",label:"现场退回",icon:"visibility"},on:{click:function(e){return t.$router.push("/task/return/"+t.$route.params.id)}}}),a("q-btn",{attrs:{push:"",label:"检修完成",icon:"check"},on:{click:function(e){return t.$router.push("/task/complete/"+t.$route.params.id)}}}),a("q-btn",{attrs:{push:"",label:"设备验收",icon:"update"},on:{click:function(e){return t.$router.push("/task/acceptance/"+t.$route.params.id)}}})],1),a("br"),a("q-table",{attrs:{title:"新站任务单："+t.$route.params.id,data:t.data,columns:t.columns,"row-key":"workshop","hide-bottom":""}}),a("q-linear-progress",{staticClass:"q-mt-sm",attrs:{rounded:"",size:"35px",value:t.progress,color:"green"}},[a("div",{staticClass:"absolute-full flex flex-center"},[a("q-badge",{attrs:{color:"white","text-color":"black",label:t.progressLabel}})],1)]),a("br"),a("q-card",{staticClass:"q-pt-none"},[a("q-tabs",{staticClass:"text-grey",attrs:{dense:"","active-color":"primary","indicator-color":"primary",align:"justify","narrow-indicator":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab",{attrs:{name:"tasks",label:"待出所单"}}),a("q-tab",{attrs:{name:"devices",label:"设备列表"}})],1),a("q-separator"),a("q-tab-panels",{attrs:{animated:""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"tasks"}},[a("div",{staticClass:"text-h6"},[t._v("待出所单")]),a("q-card-section",{staticStyle:{height:"calc(100vh - 520px)","overflow-y":"auto"}},[a("q-list",{directives:[{name:"show",rawName:"v-show",value:0!==t.taskdetails.length,expression:"taskdetails.length !== 0"}],attrs:{bordered:"",separator:""}},t._l(t.taskdetails,(function(e){return a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:e.id,attrs:{clickable:""},on:{click:function(a){return t.navTask(e.serial_number)}}},[a("q-item-section",[t._v(t._s(e.serial_number))])],1)})),1)],1)],1),a("q-tab-panel",{attrs:{name:"devices"}},[a("q-card-section",{staticStyle:{height:"calc(100vh - 520px)","overflow-y":"auto"}},[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1,showDelete:!1}})],1)],1)],1)],1)],1)},vn=[],gn={components:{simpleList:ne},data:function(){return{tab:"tasks",columns:[{name:"workshop",required:!0,label:"车间",align:"left",field:function(t){return t.workshopName},format:function(t){return"".concat(t)},sortable:!1},{name:"station",align:"left",label:"车站",field:"stationName",sortable:!1},{name:"area",align:"left",label:"工区",field:"workAreaName",sortable:!1},{name:"deadline",align:"left",label:"截止日期",field:"expiringAt",sortable:!1}],items:[],data:[],taskdetails:[],progress:0,total:0,finished:1}},computed:{progressLabel:function(){return"任务进度："+this.finished+"/"+this.total}},created:function(){var t=this;this.$http.post("workshopStayOut",{serial_number:this.$route.params.id}).then((function(e){0===e.data.data.length&&(t.tab="devices"),t.taskdetails=e.data.data})),this.$http.post("listDetails",{serial_number:this.$route.params.id}).then((function(e){t.data=[e.data.data],t.progress=e.data.data.workshopOutCount/e.data.data.taskOrderCount,t.total=e.data.data.taskOrderCount,t.finished=e.data.data.workshopOutCount,t.items=e.data.data.entire_instances.data.map((function(t){return 1===t.is_scene_back.code&&(t.entire_instance.status="现场退回"),1===t.is_out&&(t.entire_instance.active=!0),t.entire_instance}))}))},methods:{navTask:function(t){this.$router.push({path:"/depotout/".concat(t),query:{work_area_unique_code:this.data[0].workAreaUniqueCode}})}}},yn=gn,bn=a("e7a9"),_n=a("6b1d"),qn=a("58a81"),kn=Object(d["a"])(yn,fn,vn,!1,null,null,null),Cn=kn.exports;v()(kn,"components",{QBtnGroup:bn["a"],QBtn:T["a"],QTable:xt["a"],QLinearProgress:_n["a"],QBadge:qn["a"],QCard:Q["a"],QTabs:S["a"],QTab:L["a"],QSeparator:nt["a"],QTabPanels:D["a"],QTabPanel:j["a"],QCardSection:bt["a"],QList:Gt["a"],QItem:I["a"],QItemSection:Xt["a"]}),v()(kn,"directives",{Ripple:ee["a"]});var wn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"分配检修"},on:{click:t.makeArrange}})],1)],1)])},$n=[],xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-dialog",{ref:"dialog",on:{hide:t.onDialogHide}},[a("q-card",{staticClass:"q-dialog-plugin"},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("选择检修人")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-separator"),a("q-card-section",{staticClass:"scroll",staticStyle:{"max-height":"85%"}},[a("div",{staticClass:"q-gutter-md"},[a("q-select",{attrs:{filled:"",options:t.personnels,label:"检修人","option-value":"id","option-label":"nickname","emit-value":"","map-options":""},model:{value:t.contact.account_id,callback:function(e){t.$set(t.contact,"account_id",e)},expression:"contact.account_id"}})],1)]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{attrs:{color:"primary",label:"确认"},on:{click:t.onOKClick}}),a("q-btn",{attrs:{color:"primary",label:"取消"},on:{click:t.onCancelClick}})],1)],1)],1)},On=[],Qn={name:"contact",data:function(){return{personnels:[],contact:{account_id:""}}},methods:{show:function(){var t=this;this.$http.post("personnel",{work_area_unique_code:this.$route.query.work_area_unique_code}).then((function(e){t.personnels=e.data.data})),this.$refs.dialog.show()},hide:function(){this.$refs.dialog.hide()},onDialogHide:function(){this.$emit("hide")},onOKClick:function(){this.$emit("ok",Object(At["a"])({},this.contact)),this.hide()},onCancelClick:function(){this.hide()}}},Sn=Qn,Ln=a("ddd8"),Dn=Object(d["a"])(Sn,xn,On,!1,null,"79b77dda",null),jn=Dn.exports;v()(Dn,"components",{QDialog:O["a"],QCard:Q["a"],QCardSection:bt["a"],QSpace:E["a"],QBtn:T["a"],QSeparator:nt["a"],QSelect:Ln["a"],QCardActions:A["a"]}),v()(Dn,"directives",{ClosePopup:ot["a"]});var In={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.identity_code}));-1===e.indexOf(this.deviceCode)?(this.$http.get("entireInstanceByIdentityCode/".concat(this.deviceCode)).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data.entire_instance),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeArrange:function(){var t=this;0!==this.items.length?this.$q.dialog({component:jn,parent:this}).onOk((function(e){console.log(">>>> OK, received",e);var a=Object(At["a"])(Object(At["a"])({serial_number:t.$route.params.id,identity_codes:t.items.map((function(t){return t.identity_code}))},e),{},{date:t.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")});console.log(a),t.$http.post("overhaul",a).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))})):this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},En=In,Tn=Object(d["a"])(En,wn,$n,!1,null,"257a3dc4",null),zn=Tn.exports;v()(Tn,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QCardSection:bt["a"]});var Nn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"现场退回"},on:{click:t.makeReturn}})],1)],1)])},Yn=[],An={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.identity_code}));-1===e.indexOf(this.deviceCode)?(this.$http.get("entireInstanceByIdentityCode/".concat(this.deviceCode)).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data.entire_instance),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeReturn:function(){var t=this;0!==this.items.length?this.$q.dialog({component:la,parent:this}).onOk((function(e){console.log(">>>> OK, received",e);var a=Object(At["a"])(Object(At["a"])({identityCodes:t.items.map((function(t){return t.identity_code}))},e),{},{date:t.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")});console.log(a),t.$http.post("sceneBackIn",a).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))})):this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Pn=An,Bn=Object(d["a"])(Pn,Nn,Yn,!1,null,"f0a87570",null),Mn=Bn.exports;v()(Bn,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QCardSection:bt["a"]});var Hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"设备验收"},on:{click:t.makeAccecpt}})],1)],1)])},Fn=[],Wn={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.identity_code}));-1===e.indexOf(this.deviceCode)?(this.$http.get("entireInstanceByIdentityCode/".concat(this.deviceCode)).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data.entire_instance),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeAccecpt:function(){var t=this;0!==this.items.length?this.$q.dialog({component:la,parent:this}).onOk((function(e){console.log(">>>> OK, received",e);var a=Object(At["a"])(Object(At["a"])({identityCodes:t.items.map((function(t){return t.identity_code}))},e),{},{date:t.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")});console.log(a),t.$http.post("checkDevice",a).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))})):this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Rn=Wn,Kn=Object(d["a"])(Rn,Hn,Fn,!1,null,"339c2980",null),Vn=Kn.exports;v()(Kn,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QCardSection:bt["a"]});var Un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"q-pa-md"},[a("div",{staticClass:"q-gutter-md"},[a("q-input",{attrs:{outlined:"",autocapitalize:"off",label:"设备码"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addToList(e)}},scopedSlots:t._u([{key:"after",fn:function(){return[a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"send"},on:{click:t.addToList}})]},proxy:!0}]),model:{value:t.deviceCode,callback:function(e){t.deviceCode=e},expression:"deviceCode"}})],1),a("br"),a("q-card",{staticStyle:{height:"calc(100vh - 260px)","overflow-y":"auto"}},[a("q-card-section",[a("simpleList",{directives:[{name:"show",rawName:"v-show",value:""!=t.items,expression:"items != ''"}],attrs:{Litems:t.items,slidable:!1}})],1)],1),a("div",{staticClass:"q-pt-md column"},[a("q-btn",{attrs:{color:"primary",icon:"mail",label:"检修完成"},on:{click:t.makeComplete}})],1)],1)])},Jn=[],Gn={components:{simpleList:ne},data:function(){return{items:[],active:!0,deviceCode:""}},methods:{addToList:function(){var t=this;if(""!=this.deviceCode){var e=this.items.map((function(t){return t.identity_code}));-1===e.indexOf(this.deviceCode)?(this.$http.post("overhaulOfSearch",{identity_code:this.deviceCode}).then((function(e){t.items.push(Object(At["a"])(Object(At["a"])({},e.data.data),{},{active:!1}))})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})})),this.deviceCode=""):this.$q.notify({type:"warning",position:"top",message:"此设备已经添加"})}else this.$q.notify({type:"warning",position:"top",message:"设备码不能为空"})},makeComplete:function(){var t=this;if(0!==this.items.length){var e={identityCodes:this.items.map((function(t){return t.identity_code})),date:this.$date.formatDate(Date.now(),"YYYY-MM-DD HH:mm:ss")};console.log(e),this.$http.post("completeOverhaul",e).then((function(e){t.$q.notify({type:"positive",position:"top",message:e.data.msg}),t.items=[]})).catch((function(e){var a=e.response;t.$q.notify({type:"warning",position:"top",message:a.data.msg})}))}else this.$q.notify({type:"warning",position:"top",message:"无设备"})}}},Zn=Gn,Xn=Object(d["a"])(Zn,Un,Jn,!1,null,"f71c930e",null),ti=Xn.exports;v()(Xn,"components",{QInput:X["a"],QBtn:T["a"],QCard:Q["a"],QCardSection:bt["a"]}),n["a"].use(ht["a"]);var ei=[{path:"/",name:"首页",component:qt},{path:"/login",name:"登录",component:zt},{path:"/regsiter",name:"注册",component:Ht},{path:"/search",name:"设备详情查询",class:"bg-grey-4",component:we,icon:"search"},{path:"/task/list/:id",name:"新站任务详情",class:"bg-grey-4",component:Cn,hidden:!0},{path:"/task/home",name:"新站任务",class:"bg-grey-4",component:hn,icon:"assignment"},{path:"/task/arrange/:id",name:"分配检修任务",class:"bg-grey-4",component:zn,hidden:!0},{path:"/task/acceptance/:id",name:"设备验收",class:"bg-grey-4",component:Vn,hidden:!0},{path:"/task/return/:id",name:"现场退回",class:"bg-grey-4",component:Mn,hidden:!0},{path:"/task/complete/:id",name:"检修完成",class:"bg-grey-4",component:ti,hidden:!0},{path:"/install",name:"上道",class:"bg-grey-4",component:Da,icon:"file_upload"},{path:"/uninstall",name:"下道",class:"bg-grey-4",component:Na,icon:"get_app"},{path:"/about",name:"安卓接口测试",class:"bg-grey-4",component:Qt,hidden:!0},{path:"/store",name:"入库",class:"bg-grey-4",component:De,icon:"exit_to_app"},{path:"/scenestore",name:"现场备品入库",class:"bg-grey-4",component:Ne,icon:"exit_to_app"},{path:"/scrap",name:"报废",class:"bg-grey-4",component:He,icon:"delete_sweep"},{path:"/check",name:"盘点",class:"bg-grey-4",component:ea,icon:"fact_check"},{path:"/depotin",name:"入所",class:"bg-grey-4",component:ba,icon:"move_to_inbox"},{path:"/depotout/:id?",name:"出所",class:"bg-grey-4",component:ma,icon:"unarchive"},{path:"/damage",name:"报损",class:"bg-grey-4",component:Ue,icon:"rule"},{path:"/bind",name:"现场设备定位",class:"bg-grey-4",component:Ha,hidden:!0},{path:"/test",name:"测试",class:"bg-grey-4",component:rn,icon:"bug_report",hidden:!0}],ai=new ht["a"]({routes:ei});ai.beforeEach((function(t,e,a){var i=localStorage.getItem("token");"/login"!==t.path&&"/regsiter"!==t.path&&null==i?a({path:"/login"}):(n["a"].prototype.$http.defaults.headers.common["Token"]=i,a())}));var ni=ai,ii=a("2f62");n["a"].use(ii["a"]);var oi=new ii["a"].Store({state:{offlineMode:!1,showFab:!1,userInfo:{}},mutations:{},actions:{},modules:{}}),si=(a("c867"),a("bf69")),ci=(a("e54f"),a("b05d")),ri=a("2a19"),li=a("436b"),di=a("1b3f"),ui=a("bd4c");n["a"].prototype.$date=ui["a"],n["a"].use(ci["a"],{config:{loadingBar:{color:"green",size:"3px",position:"top"}},plugins:{Notify:ri["a"],Dialog:li["a"],LoadingBar:di["a"]},lang:si["a"]});var pi=a("bc3a"),mi=a.n(pi);n["a"].prototype.$http=mi.a,mi.a.defaults.baseURL="/api/pda",n["a"].prototype.$init=function(t){window.AndroidWebView.Init(t)},n["a"].prototype.$reset=function(){window.AndroidWebView.Reset()},n["a"].prototype.$clear=function(){window.AndroidWebView.Clear()},n["a"].prototype.$update=function(){window.AndroidWebView.Update()},n["a"].prototype.$pall=function(){return window.AndroidWebView.ParameterAll()},n["a"].prototype.$pclear=function(){return window.AndroidWebView.ParameterClear()},n["a"].prototype.$pquery=function(t){return window.AndroidWebView.ParameterQuery(t)},n["a"].prototype.$pdelete=function(t){return window.AndroidWebView.ParameterDelete(t)},n["a"].prototype.$pinsert=function(t,e){return window.AndroidWebView.ParameterInsert(t,e)},n["a"].prototype.$pupdate=function(t,e){return window.AndroidWebView.ParameterUpdate(t,e)};var hi=a("bb6f"),fi=a.n(hi);n["a"].use(fi.a);var vi=a("245e"),gi=a.n(vi);n["a"].prototype.$hbq=gi.a;a("b64b");var yi=a("6821"),bi=a.n(yi);n["a"].prototype.$sign=function(t,e){var a={},n=Object.assign({},t);n["secret_key"]=e;var i=Object.keys(n);return i.sort().map((function(t){n[t]&&(a[t]=n[t])})),bi()(gi()(a)).toUpperCase()};var _i=a("279c"),qi=a.n(_i),ki=a("b970");a("157a");n["a"].use(ki["a"]),n["a"].prototype.$bcrypt=qi.a,n["a"].config.productionTip=!1,new n["a"]({router:ni,store:oi,render:function(t){return t(mt)}}).$mount("#app")},6:function(t,e){},7:function(t,e){},8:function(t,e){},"8a48":function(t,e,a){"use strict";a("a18a")},9:function(t,e){},a18a:function(t,e,a){},c867:function(t,e,a){},d607:function(t,e,a){t.exports=a.p+"img/profile.27a1fe10.svg"},d6db:function(t,e,a){"use strict";a("24d3")}});
//# sourceMappingURL=app.a5042eb3.js.map